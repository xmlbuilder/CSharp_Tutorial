

# 🧵 UTF-8 출력: C#, Java, C++ 비교

## ✅ C#에서 UTF-8 출력
```csharp
using System.Text;
using System.IO;

File.WriteAllText("output.txt", "한글 테스트", Encoding.UTF8);
```

- Encoding.UTF8은 BOM을 포함하지 않음 (기본적으로).
- BOM이 필요한 경우: new UTF8Encoding(true) 사용.
- 콘솔 출력 시 깨짐 방지:
```csharp
Console.OutputEncoding = Encoding.UTF8;
Console.WriteLine("한글 출력");
```


## ✅ Java에서 UTF-8 출력
```java
import java.io.*;

public class Main {
    public static void main(String[] args) throws Exception {
        try (Writer writer = new OutputStreamWriter(new FileOutputStream("output.txt"), "UTF-8")) {
            writer.write("한글 테스트");
        }
    }
}
```

- Java는 기본적으로 BOM을 붙이지 않음.
- 콘솔에서 깨질 경우, IDE나 터미널의 인코딩 설정 확인 필요.
- System.out.println("한글");은 JVM이 UTF-8이면 정상 출력됨.

## ✅ C++에서 UTF-8 출력
```cpp
#include <fstream>
#include <string>

int main() {
    std::ofstream file("output.txt");
    file << u8"한글 테스트"; // u8은 UTF-8 리터럴
    file.close();
}
```

- u8"..."은 C++11 이상에서 UTF-8 문자열 리터럴.
- std::ofstream은 BOM을 자동으로 붙이지 않음.
- 콘솔 출력은 OS/터미널 인코딩에 따라 깨질 수 있음:
- Windows에서는 SetConsoleOutputCP(CP_UTF8); 필요
- Linux/macOS는 UTF-8 기본이므로 문제 없음

## ⚠️ 공학 프로그램에서 UTF-8 입력 시 문제: BOM 이슈
###  🔍 BOM(Byte Order Mark)이란?
- UTF-8 파일의 시작에 붙는 숨겨진 3바이트 (EF BB BF).
- 일부 프로그램(특히 오래된 공학 소프트웨어)은 BOM이 있으면 파일을 읽지 못하거나 오작동함.
### ✅ 안전하게 ASCII로 저장하는 방법
#### C#
```csharp
File.WriteAllText("ascii_output.txt", "ASCII only text", Encoding.ASCII);
```

- Encoding.ASCII은 0x00~0x7F 범위만 저장.
- 한글 등 비ASCII 문자는 ?로 대체됨.
#### Java
```java
Writer writer = new OutputStreamWriter(new FileOutputStream("ascii_output.txt"), "US-ASCII");
writer.write("ASCII only text");
writer.close();
```

#### C++
```cpp
std::ofstream file("ascii_output.txt");
file << "ASCII only text"; // 직접 ASCII 범위만 사용
file.close();
```
## ✅ 팁: UTF-8 저장 시 BOM 제거
- C#: new UTF8Encoding(false) → BOM 없이 저장
- Java: 기본적으로 BOM 없음
- C++: 직접 BOM을 넣지 않으면 없음

## 🧠 요약 테이블
| 언어 | UTF-8 출력 | BOM 포함 여부 | ASCII 저장 | 콘솔 깨짐 방지 |
|-----|------------|--------------|-----------|--------------| 
| C# | Encoding.UTF8 | 기본 없음 (true로 포함 가능) | Encoding.ASCII | Console.OutputEncoding = Encoding.UTF8 | 
| Java | "UTF-8" 인코딩 | 없음 | "US-ASCII" | JVM/IDE 설정 확인 | 
| C++ | u8"..." + ofstream | 없음 | 직접 ASCII 문자만 사용 | Windows: SetConsoleOutputCP(CP_UTF8) | 


---



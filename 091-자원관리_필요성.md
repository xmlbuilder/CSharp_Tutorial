# 🧹 C#의 자원 관리 (using과 IDisposable)
## 🔧 기본 개념
- C#에서는 관리되는 리소스(Managed Resource)와 비관리 리소스(Unmanaged Resource)를 구분합니다.
- IDisposable 인터페이스는 명시적으로 리소스를 해제하기 위한 메커니즘을 제공합니다.
- using 문은 IDisposable.Dispose()를 자동으로 호출해주는 문법입니다.
## ✅ 예시 코드
```csharp
using (var conn = new SqlConnection())
{
    // conn 사용
} // 여기서 Dispose() 자동 호출됨
```

❗ 주의할 점
```csharp
public class ObjectWithManagedResourcesOnly : IDisposable
{
    private SqlConnection sqlConnection = new SqlConnection();

    public void Dispose()
    {
        sqlConnection.Dispose();
    }
}
```

- Dispose()는 using 블록 안에서만 자동 호출됩니다.
- using 없이 객체를 생성하면 Dispose()는 직접 호출해야 합니다.

## ☕ Java의 자원 관리 (try-with-resources와 AutoCloseable)
### 🔧 기본 개념
- Java에서는 AutoCloseable 인터페이스를 통해 자원 해제를 지원합니다.
- try-with-resources 문은 close() 메서드를 자동 호출합니다.
### ✅ 예시 코드
```java
try (Connection conn = DriverManager.getConnection(...)) {
    // conn 사용
} // 여기서 conn.close() 자동 호출됨
```

## 🔄 C# vs Java 비교
| 항목                     | C# (`using`, `IDisposable`)               | Java (`try-with-resources`, `AutoCloseable`) |
|--------------------------|-------------------------------------------|----------------------------------------------|
| 자동 자원 해제 문법      | `using`                                   | `try-with-resources`                         |
| 인터페이스               | `IDisposable`                             | `AutoCloseable`                              |
| 해제 메서드 이름         | `Dispose()`                               | `close()`                                    |
| 자동 호출 조건           | `using` 블록 내에서만 자동 호출           | `try` 블록 내에서만 자동 호출               |
| 예외 발생 시 자원 해제   | `finally` 없이도 `Dispose()` 호출됨       | `finally` 없이도 `close()` 호출됨           |
| 명시적 호출 필요 여부    | `using` 없으면 `Dispose()` 직접 호출 필요 | `try` 없으면 `close()` 직접 호출 필요       |
| 비관리 리소스 처리       | `SafeHandle` 등으로 직접 관리 가능        | JNI 등으로 직접 관리 필요                    |
| GC와의 관계              | GC는 `Dispose()` 호출 안 함               | GC는 `close()` 호출 안 함                   |



## 🧠 핵심 요점 요약
| 언어 | 자동 자원 해제 문법     | 인터페이스     | 해제 메서드 | 자동 호출 조건             |
|------|--------------------------|----------------|-------------|----------------------------|
| C#   | `using`                  | `IDisposable`  | `Dispose()` | `using` 블록 내에서만 호출 |
| Java | `try-with-resources`     | `AutoCloseable`| `close()`   | `try` 블록 내에서만 호출   |



## 💡 마무리 팁
- C#에서 Dispose()는 명시적 자원 해제를 위한 것이며, using을 쓰면 예외가 발생해도 안전하게 해제됩니다.
- Java의 try-with-resources도 같은 목적이지만, AutoCloseable을 구현해야 자동 호출됩니다.
- 두 언어 모두 자원 누수 방지를 위해 이 구조를 적극 활용하는 것이 좋습니다.

---

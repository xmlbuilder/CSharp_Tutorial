# ğŸ” C#ì˜ unsafe í‚¤ì›Œë“œ ê°œìš”
C#ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì•ˆì „ì„±ê³¼ íƒ€ì… ì•ˆì •ì„±ì„ ë³´ì¥í•˜ëŠ” ê´€ë¦¬í˜• ì–¸ì–´ì…ë‹ˆë‹¤.
í•˜ì§€ë§Œ unsafe í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ê´€ë¦¬í˜• ì½”ë“œì²˜ëŸ¼ í¬ì¸í„°ë¥¼ ì§ì ‘ ë‹¤ë£° ìˆ˜ ìˆëŠ” ì»¨í…ìŠ¤íŠ¸ë¥¼ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```csharp
unsafe static void FastCopy(byte* ps, byte* pd, int count) { ... }
```

- unsafeëŠ” í¬ì¸í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë©”ì„œë“œ, ë¸”ë¡, íƒ€ì… ì„ ì–¸ì— í•„ìš”í•©ë‹ˆë‹¤.
- ì»´íŒŒì¼ ì‹œ /unsafe ì˜µì…˜ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

## ğŸ§ª í¬ì¸í„° ì—°ì‚° ì˜ˆì œ
```csharp
unsafe static void SquarePtrProgram(int* p)
{
    *p *= *p;
}

public unsafe static void Main(string[] args)
{
    int i = 5;
    SquarePtrProgram(&i);
    Console.WriteLine(i); // ì¶œë ¥: 25
}
```

- &iëŠ” ë³€ìˆ˜ iì˜ ì£¼ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
- *pëŠ” í•´ë‹¹ ì£¼ì†Œì˜ ê°’ì„ ì§ì ‘ ìˆ˜ì •í•©ë‹ˆë‹¤.

## ğŸ“Œ fixed ë¬¸ì„ í†µí•œ ë°°ì—´ í¬ì¸í„°
```csharp
unsafe static void UnsafeSquareArray(int[] pArr)
{
    int len = pArr.Length;
    fixed (int* fixedPointer = &(pArr[0]))
    {
        int* p = fixedPointer;
        for (int i = 0; i < len; i++)
        {
            *p *= *p;
            p++;
        }
    }
}
```

- fixedëŠ” ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ë°°ì—´ì„ ì´ë™ì‹œí‚¤ì§€ ëª»í•˜ë„ë¡ ë©”ëª¨ë¦¬ë¥¼ ê³ ì •í•©ë‹ˆë‹¤.
- í¬ì¸í„°ëŠ” fixed ë¸”ë¡ ë‚´ì—ì„œë§Œ ìœ íš¨í•˜ë©° ì½ê¸° ì „ìš©ì…ë‹ˆë‹¤.

## ğŸ§¬ êµ¬ì¡°ì²´ ë‚´ ê³ ì • ë°°ì—´ ì‚¬ìš©
```csharp
unsafe struct Example
{
    public fixed byte someField[8];
    public fixed char AnotherField[64];
}
```

- fixed ë°°ì—´ì€ êµ¬ì¡°ì²´ ë‚´ë¶€ì—ì„œ ê³ ì • í¬ê¸°ì˜ ë²„í¼ë¥¼ ì„ ì–¸í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ì£¼ë¡œ Interopì´ë‚˜ ì„±ëŠ¥ ìµœì í™”ì— í™œìš©ë©ë‹ˆë‹¤.

## ğŸ”¤ ë¬¸ìì—´ í¬ì¸í„° ìˆ˜ì • ì˜ˆì œ
```csharp
var myStr = "Hello World!";
unsafe
{
    fixed (char* ptr = myStr)
    {
        ptr[0] = 'M';
    }
    Console.WriteLine(myStr); // ì¶œë ¥: Mello World!
}
```

- ë¬¸ìì—´ë„ fixedë¥¼ í†µí•´ í¬ì¸í„°ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- ë‹¨, ë¬¸ìì—´ì€ ë¶ˆë³€ì´ë¯€ë¡œ ì´ ë°©ì‹ì€ íŠ¹ë³„í•œ ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤

## âš ï¸ unsafe ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­
| í•­ëª©                 | ì„¤ëª…                                                                 |
|----------------------|----------------------------------------------------------------------|
| ë©”ëª¨ë¦¬ ì•ˆì •ì„± ì €í•˜    | í¬ì¸í„°ë¥¼ ì˜ëª» ì‚¬ìš©í•˜ë©´ ë©”ëª¨ë¦¬ ì†ìƒ, ë²„í¼ ì˜¤ë²„ëŸ° ë“±ì˜ ìœ„í—˜ ë°œìƒ         |
| íƒ€ì… ì•ˆì „ì„± ì•½í™”      | ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì²´í¬ë¥¼ ìƒëµí•˜ë¯€ë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ê°€ëŠ¥ì„± ì¦ê°€               |
| ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ìš°íšŒ    | ê°ì²´ê°€ GCì— ì˜í•´ ì´ë™ë˜ë©´ í¬ì¸í„°ê°€ ë¬´íš¨í™”ë  ìˆ˜ ìˆìŒ                     |
| í”Œë«í¼ ì œí•œ           | ì¼ë¶€ í™˜ê²½ì—ì„œëŠ” `unsafe` ì½”ë“œ ì‹¤í–‰ì´ ì œí•œë  ìˆ˜ ìˆìŒ                     |
| ë””ë²„ê¹… ë‚œì´ë„ ìƒìŠ¹    | í¬ì¸í„° ì—°ì‚°ì€ ë””ë²„ê¹…ê³¼ ìœ ì§€ ë³´ìˆ˜ì— ì–´ë ¤ì›€ì„ ì¤„ ìˆ˜ ìˆìŒ                  |

î·™î·š

## ğŸ§¬ C# `unsafe` vs ë‹¤ë¥¸ ì–¸ì–´ ë¹„êµ

| í•­ëª©               | C# (`unsafe`)                            | C++                                        | Java                                       |
|--------------------|-------------------------------------------|---------------------------------------------|---------------------------------------------|
| í¬ì¸í„° ì§€ì›        | âœ… `unsafe` ë¸”ë¡ ë‚´ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥         | âœ… ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥                         | âŒ ì§ì ‘ì ì¸ í¬ì¸í„° ì‚¬ìš© ë¶ˆê°€                  |
| ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼   | âœ… ê°€ëŠ¥ (`*`, `&`, `fixed`, `stackalloc`) | âœ… ê°€ëŠ¥ (`*`, `&`, `new`, `delete`)           | âŒ ë¶ˆê°€ëŠ¥ (JVMì´ ë©”ëª¨ë¦¬ ê´€ë¦¬)                 |
| íƒ€ì… ì•ˆì „ì„±        | âš ï¸ ì•½í™”ë¨ (`unsafe` ì‚¬ìš© ì‹œ íƒ€ì… ì²´í¬ ìƒëµ) | âŒ ë‚®ìŒ (ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì²´í¬ ì œí•œì )         | âœ… ë†’ìŒ (ëª¨ë“  ê°ì²´ëŠ” íƒ€ì… ì•ˆì „í•˜ê²Œ ê´€ë¦¬ë¨)    |
| ê°€ë¹„ì§€ ì»¬ë ‰ì…˜      | âœ… ìˆìŒ (ë‹¨, `fixed`ë¡œ ë©”ëª¨ë¦¬ ê³ ì • í•„ìš”)    | âŒ ì—†ìŒ (ìˆ˜ë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ í•„ìš”)               | âœ… ìˆìŒ (JVMì´ ìë™ ê´€ë¦¬)                     |
| ì•ˆì „ì„± ì œì–´        | âœ… ê¸°ë³¸ì€ ì•ˆì „, `unsafe`ë¡œ ì„ íƒì  ë¹„ì•ˆì „ í—ˆìš© | âŒ ì—†ìŒ (ì „ì²´ê°€ ë¹„ì•ˆì „ í™˜ê²½)                  | âœ… ì™„ì „í•œ ì•ˆì „ í™˜ê²½                           |
| ì‚¬ìš© ëª©ì           | ê³ ì„±ëŠ¥ ì—°ì‚°, Interop, ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°     | ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°, ì„±ëŠ¥ ìµœì í™”, ì €ìˆ˜ì¤€ ì œì–´   | ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ, ì•ˆì •ì„± ì¤‘ì‹¬               |
| ì‹¤í–‰ í™˜ê²½ ì œí•œ     | âš ï¸ ì¼ë¶€ í”Œë«í¼ì—ì„œ `unsafe` ì œí•œ ê°€ëŠ¥        | âŒ ì—†ìŒ                                       | âœ… JVM ê¸°ë°˜ í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰ ê°€ëŠ¥              |



## âœ… ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?
- ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•œ ê²½ìš° (ì˜ˆ: ì´ë¯¸ì§€ ì²˜ë¦¬, ë²„í¼ ì—°ì‚°)
- Interop: C/C++ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì—°ë™ ì‹œ í¬ì¸í„° ê¸°ë°˜ API í•„ìš”
- ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë°: ë©”ëª¨ë¦¬ ì œì–´ê°€ í•„ìš”í•œ ì €ìˆ˜ì¤€ ì‘ì—…
---
